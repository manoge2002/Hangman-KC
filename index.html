<!DOCTYPE html>
<html lang="de" class="bg-slate-950">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman Konficastle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; overflow-x: hidden; }
        .mono { font-family: 'JetBrains+Mono', monospace; }
        @keyframes pop {
            0% { transform: scale(0.95); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        /* Hide scrollbars globally */
        ::-webkit-scrollbar { display: none; }
        * { scrollbar-width: none; -ms-overflow-style: none; }
        
        .letter-slot {
            transition: all 0.5s ease;
        }
        .drawing-stroke {
            transition: opacity 0.3s ease;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "@google/genai": "https://esm.sh/@google/genai@^1.37.0",
    "vite": "https://esm.sh/vite@^7.3.1",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-slate-950 text-slate-100 selection:bg-indigo-500/30 min-h-screen">
    <div id="app" class="flex flex-col items-center justify-start py-8 px-4 md:px-12 relative">
        <main id="main-content" class="w-full max-w-[2000px] grid grid-cols-1 lg:grid-cols-12 gap-8 md:gap-12 items-start transition-transform duration-300 origin-top">
            
            <!-- Sidebar: Drawing & Lives -->
            <div class="lg:col-span-3 lg:sticky lg:top-8 flex flex-col items-center space-y-6 md:space-y-12">
                
                <!-- Gallows Box -->
                <div class="w-full bg-slate-900/40 p-6 md:p-8 rounded-[4rem] border border-white/5 backdrop-blur-sm flex flex-col items-center shadow-2xl">
                    <svg id="hangman-svg" height="360" width="300" class="drop-shadow-2xl">
                        <!-- Static parts -->
                        <line x1="15" y1="345" x2="285" y2="345" stroke="#f1f5f9" stroke-width="6" />
                        <line x1="75" y1="345" x2="75" y2="30" stroke="#f1f5f9" stroke-width="6" />
                        <line x1="75" y1="30" x2="210" y2="30" stroke="#f1f5f9" stroke-width="6" />
                        <line x1="210" y1="30" x2="210" y2="75" stroke="#f1f5f9" stroke-width="3" />
                        <!-- Dynamic parts -->
                        <circle id="part-0" cx="210" cy="105" r="30" stroke="#f1f5f9" stroke-width="6" fill="none" class="opacity-0 drawing-stroke" />
                        <line id="part-1" x1="210" y1="135" x2="210" y2="225" stroke="#f1f5f9" stroke-width="6" class="opacity-0 drawing-stroke" />
                        <line id="part-2" x1="210" y1="165" x2="165" y2="195" stroke="#f1f5f9" stroke-width="6" class="opacity-0 drawing-stroke" />
                        <line id="part-3" x1="210" y1="165" x2="255" y2="195" stroke="#f1f5f9" stroke-width="6" class="opacity-0 drawing-stroke" />
                        <line id="part-4" x1="210" y1="225" x2="165" y2="285" stroke="#f1f5f9" stroke-width="6" class="opacity-0 drawing-stroke" />
                        <line id="part-5" x1="210" y1="225" x2="255" y2="285" stroke="#f1f5f9" stroke-width="6" class="opacity-0 drawing-stroke" />
                    </svg>
                </div>

                <!-- Life Box -->
                <div class="w-full bg-slate-900/40 p-10 rounded-[3rem] border border-white/5 backdrop-blur-sm flex items-center justify-center shadow-2xl">
                    <div class="flex flex-col items-center gap-4">
                        <span class="text-6xl animate-pulse mb-2">❤️</span>
                        <span id="lives-display" class="text-3xl md:text-5xl font-black tracking-widest uppercase text-white whitespace-nowrap">
                            6 / 6
                        </span>
                    </div>
                </div>
                
                <button id="reset-btn" class="text-[10px] md:text-xs text-slate-700 hover:text-slate-400 uppercase tracking-widest transition-colors font-bold">
                    Spiel zurücksetzen
                </button>
            </div>

            <!-- Game Area: Words & Keyboard -->
            <div class="lg:col-span-9 space-y-12 md:space-y-16 flex flex-col items-center w-full">
                
                <!-- Word Container -->
                <div id="word-container" class="w-full max-w-full space-y-10 md:space-y-16 bg-slate-900/40 p-8 md:p-16 rounded-[4rem] border border-white/5 flex flex-col items-center shadow-2xl mx-auto overflow-hidden">
                    <!-- Words will be injected here -->
                </div>

                <!-- Keyboard -->
                <div id="keyboard" class="grid grid-cols-6 sm:grid-cols-10 gap-3 p-6 bg-slate-900/40 rounded-[2.5rem] shadow-2xl w-full max-w-5xl mx-auto border border-white/5 backdrop-blur-sm">
                    <!-- Buttons will be injected here -->
                </div>
            </div>
        </main>

        <!-- Scaling Controls -->
        <div class="fixed bottom-6 right-6 flex flex-col gap-3 z-50">
            <button id="scale-up" class="w-10 h-10 md:w-12 md:h-12 bg-slate-800 hover:bg-slate-700 text-white rounded-xl flex items-center justify-center text-xl font-bold border border-white/10 transition-colors shadow-2xl active:scale-90">
                +
            </button>
            <button id="scale-down" class="w-10 h-10 md:w-12 md:h-12 bg-slate-800 hover:bg-slate-700 text-white rounded-xl flex items-center justify-center text-xl font-bold border border-white/10 transition-colors shadow-2xl active:scale-90">
                -
            </button>
            <div id="scale-display" class="text-[11px] text-slate-400 text-center font-black bg-slate-900/90 px-2 py-1 rounded-md backdrop-blur-md border border-white/5">
                100%
            </div>
        </div>
    </div>

    <script type="module">
        import { GoogleGenAI } from "https://esm.sh/@google/genai@1.37.0";

        // Constants
        const GERMAN_ALPHABET = [
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 
            'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
            'Ä', 'Ö', 'Ü', 'ẞ'
        ];

        const GAME_WORDS = [
            'GROẞZÜGIGKEIT',
            'VERGEBUNG',
            'GEBET',
            'RUHE',
            'NÄCHSTENLIEBE',
            'VERURTEILT NICHT'
        ];

        const MAX_LIVES = 6;

        // State
        let guessedLetters = [];
        let status = 'PLAYING'; // PLAYING, WON, LOST
        let scale = 1.0;
        let currentWordIndex = 0; // Simplified for this example, we show all GAME_WORDS like in the React version

        // DOM Elements
        const wordContainer = document.getElementById('word-container');
        const keyboard = document.getElementById('keyboard');
        const livesDisplay = document.getElementById('lives-display');
        const scaleDisplay = document.getElementById('scale-display');
        const mainContent = document.getElementById('main-content');
        const resetBtn = document.getElementById('reset-btn');

        // Logic
        function init() {
            renderWord();
            renderKeyboard();
            updateUI();
        }

        function renderWord() {
            wordContainer.innerHTML = '';
            GAME_WORDS.forEach((word, wordIdx) => {
                const wordRow = document.createElement('div');
                wordRow.className = "w-full flex justify-center flex-nowrap gap-1 md:gap-4 px-2 md:px-6 items-center mb-10 last:mb-0";
                
                word.split("").forEach((letter, lIdx) => {
                    const slot = document.createElement('div');
                    const isSpace = letter === ' ';
                    slot.className = `flex-shrink flex-1 h-12 md:h-32 flex items-center justify-center ${isSpace ? 'max-w-[12px] md:max-w-[40px]' : 'border-b-2 md:border-b-8 border-slate-800'}`;
                    slot.style.minWidth = '8px';

                    if (!isSpace) {
                        const span = document.createElement('span');
                        const isGuessed = guessedLetters.includes(letter);
                        span.textContent = letter;
                        span.className = `text-xl sm:text-3xl md:text-6xl lg:text-8xl font-black mono transition-all duration-500 ${isGuessed || status === 'LOST' ? 'opacity-100' : 'opacity-0'}`;
                        
                        if (status === 'WON') {
                            span.classList.add('text-emerald-400', 'drop-shadow-[0_0_20px_rgba(52,211,153,0.9)]');
                        } else if (status === 'LOST' && !isGuessed) {
                            span.classList.add('text-rose-500');
                        } else {
                            span.classList.add('text-indigo-400');
                        }
                        slot.appendChild(span);
                    }
                    wordRow.appendChild(slot);
                });
                wordContainer.appendChild(wordRow);
            });
        }

        function renderKeyboard() {
            keyboard.innerHTML = '';
            GERMAN_ALPHABET.forEach(letter => {
                const btn = document.createElement('button');
                const isGuessed = guessedLetters.includes(letter);
                btn.textContent = letter;
                btn.disabled = isGuessed || status !== 'PLAYING';
                btn.className = `h-14 md:h-20 w-full flex items-center justify-center rounded-2xl font-black text-xl md:text-3xl transition-all ${
                    isGuessed 
                    ? 'bg-slate-950/30 text-slate-800 cursor-not-allowed border-transparent' 
                    : 'bg-slate-800/50 text-indigo-300 border border-white/10 hover:bg-indigo-600/30 hover:border-indigo-500/50 active:scale-90 shadow-lg'
                }`;
                if (status !== 'PLAYING' && !isGuessed) {
                    btn.classList.add('opacity-30', 'cursor-not-allowed');
                }
                btn.onclick = () => handleGuess(letter);
                keyboard.appendChild(btn);
            });
        }

        function handleGuess(letter) {
            if (status !== 'PLAYING' || guessedLetters.includes(letter)) return;
            guessedLetters.push(letter);
            
            checkGameStatus();
            updateUI();
        }

        function checkGameStatus() {
            const allUniqueLetters = [...new Set(GAME_WORDS.join('').replace(/\s/g, '').split(''))];
            const wrongGuessesCount = guessedLetters.filter(l => !GAME_WORDS.some(word => word.includes(l))).length;
            
            const won = allUniqueLetters.every(l => guessedLetters.includes(l));
            const lost = wrongGuessesCount >= MAX_LIVES;

            if (won) status = 'WON';
            else if (lost) status = 'LOST';
            else status = 'PLAYING';
        }

        function updateUI() {
            const wrongGuessesCount = guessedLetters.filter(l => !GAME_WORDS.some(word => word.includes(l))).length;
            const livesLeft = Math.max(0, MAX_LIVES - wrongGuessesCount);
            
            livesDisplay.textContent = `${livesLeft} / ${MAX_LIVES}`;
            
            // Drawing
            for (let i = 0; i < 6; i++) {
                const part = document.getElementById(`part-${i}`);
                if (i < wrongGuessesCount) {
                    part.classList.remove('opacity-0');
                    part.classList.add('opacity-100');
                } else {
                    part.classList.add('opacity-0');
                    part.classList.remove('opacity-100');
                }
            }

            renderWord();
            renderKeyboard();
        }

        // Scale Management
        document.getElementById('scale-up').onclick = () => {
            scale = Math.min(scale + 0.1, 2.0);
            applyScale();
        };
        document.getElementById('scale-down').onclick = () => {
            scale = Math.max(scale - 0.1, 0.5);
            applyScale();
        };
        function applyScale() {
            mainContent.style.transform = `scale(${scale})`;
            scaleDisplay.textContent = `${Math.round(scale * 100)}%`;
        }

        // Reset
        resetBtn.onclick = () => {
            guessedLetters = [];
            status = 'PLAYING';
            updateUI();
        };

        // Keyboard support
        window.addEventListener('keydown', (e) => {
            let key = e.key.toUpperCase();
            if (e.key === 'ß' || key === 'SS') key = 'ẞ';
            if (GERMAN_ALPHABET.includes(key)) {
                handleGuess(key);
            }
        });

        // Initialize
        init();
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
